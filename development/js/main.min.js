function init(){logMessage("template ready"),document.getElementById("next").onclick=function(){moveNext()},document.getElementById("previous").onclick=function(){movePrevious()},document.getElementById("mute-loud").onclick=function(){toggleAudioMute()},document.getElementById("play-pause").onclick=function(){toggleAudioPlay()},enterFrame(0)}function enterFrame(e){runAnimations(e);var t=document.getElementById("next"),o=document.getElementById("previous");t.style.opacity="1",t.style.pointerEvents="all",o.style.opacity="1",o.style.pointerEvents="all",0>=e?(frame=0,o.style.opacity=".1",o.style.pointerEvents="none",logMessage("on first slide")):e>=totalFrames?(frame=totalFrames,t.style.opacity=".1",t.style.pointerEvents="none",logMessage("on last slide")):logMessage("navigated successfully")}function toggleAudioMute(){audioMute?(document.getElementById("mute-loud").style.background="url('./img/icons/audio-loud.png')",audioMute=!1):(document.getElementById("mute-loud").style.background="url('./img/icons/audio-mute.png')",audioMute=!0),logMessage("toggle mute")}function toggleAudioPlay(){audioPlaying?(document.getElementById("play-pause").style.background="url('./img/icons/audio-play.png')",audioPlaying=!1):(document.getElementById("play-pause").style.background="url('./img/icons/audio-pause.png')",audioPlaying=!0),logMessage("toggle play")}function playAudio(){sound=new Howl({urls:["sound.mp3","sound.ogg","sound.wav"],autoplay:!0,loop:!0,volume:.5,onend:function(){alert("Finished!")}})}function moveNext(){direction=1,frame++,enterFrame(frame)}function movePrevious(){direction=0,frame--,enterFrame(frame)}function runAnimations(e){if(void 0!==frame_data[e])for(var t=frame_data[e].elements,o=0;o<Object.keys(t).length;o++){var n=Object.keys(t)[o];resetStyles(n);var a=t[n],l=a.styles,i=a.delay,r=a.duration;void 0===i&&(i=100),void 0===r&&(r=400);var s=document.getElementById(n);if(null!==s){s.style.transition="all "+r+"ms ease-out "+i+"ms";for(var u in l)l.hasOwnProperty(u)&&(s.style[u]=l[u])}else console.log("cant find #"+n)}}function logMessage(e){for(var t=document.getElementById("diagnostic-panel"),o=[frame,totalFrames,audioPlaying,audioMute,autoAdvance],n=e+"<br/>------------------------------------<br/>",a=0;a<o.length;a++)n+=diagnosticsLabels[a]+o[a]+"<br/>";t.innerHTML=n}function randomColor(){return"#444"}function resetStyles(e){null!==document.getElementById(e)&&document.getElementById(e).removeAttribute("style")}function setVendor(e,t,o){e.style["-webkit-"+t]=o,e.style["-moz-"+t]=o,e.style["-ms-"+t]=o,e.style["-o-"+t]=o,e.style[t]=o}function handleMouseMove(e){var t,o,n;e=e||window.event,null===e.pageX&&null!==e.clientX&&(t=e.target&&e.target.ownerDocument||document,o=t.documentElement,n=t.body,e.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),moveParallax(document.getElementById("graphic-01e"),e.pageX),moveParallax(document.getElementById("graphic-01b"),.2*e.pageX),moveParallax(document.getElementById("graphic-01d"),-e.pageX)}function moveParallax(e,t){console.log("before"+e.offsetLeft),setVendor(e,"transition","all 0ms ease-out 0ms");var o;o=0>t?-.5>t?.05*-t:t:t>.5?.05*-t:t,e.style.marginLeft=.05*(50+o)+"%",console.log("after"+e.offsetLeft)}var readyStateCheckInterval=setInterval(function(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),init())},100),frame=0,totalFrames=Object.keys(frame_data).length-1,audioPlaying=!0,audioMute=!1,autoAdvance=!1,iOS=/iPad|iPhone|iPod/.test(navigator.userAgent),direction,sound,diagnosticsLabels=["frame: ","totalFrames: ","audioPlaying: ","audioMute: ","autoAdvance: "],browserPrefix;navigator.sayswho=function(){var e,t=navigator.appName,o=navigator.userAgent,n=o.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);n&&null!==(e=o.match(/version\/([\.\d]+)/i))&&(n[2]=e[1]),n=n?[n[1],n[2]]:[t,navigator.appVersion,"-?"],n=n[0],"Chrome"==n&&(browserPrefix="webkit"),"Firefox"==n&&(browserPrefix="moz"),"Safari"==n&&(browserPrefix="webkit"),"MSIE"==n&&(browserPrefix="ms")}(),window.addEventListener("load",function(){iOS&&new FastClick(document.body)},!1);var body=document.body,html=document.documentElement,height=Math.max(body.offsetHeight,html.clientHeight,html.offsetHeight),width=Math.max(body.offsetWidth,html.clientWidth,html.offsetWidth);iOS||(document.onmousemove=handleMouseMove);